<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>The MySQL enum type - Dan Goldin</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content="I've been hesitant to use the MySQL enum field after reading some stories but it turns out to be pretty useful and stable. Not for everything but has it's use cases."><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2016/03/10/the-mysql-enum-type/"><meta property="og:title" content="The MySQL enum type"><meta property="og:image" content="/image/photo.jpg"><meta property="og:description" content="I've been hesitant to use the MySQL enum field after reading some stories but it turns out to be pretty useful and stable. Not for everything but has it's use cases."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="The MySQL enum type"><meta name=twitter:description content="I've been hesitant to use the MySQL enum field after reading some stories but it turns out to be pretty useful and stable. Not for everything but has it's use cases."><meta name=twitter:image content="/image/photo.jpg"><link rel=canonical href=/2016/03/10/the-mysql-enum-type/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=/image/favicon.png><link href=/index.xml rel=alternate type=application/rss+xml title="Dan Goldin"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36313127-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-36313127-1');</script></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">The MySQL enum type</h1><div class="mb-md-4 meta"><span class="date middot" title="Thu Mar 10 2016 00:00:00 UTC">2016-03-10</span>
<span class="reading-time middot">2 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/sql>sql</a></li><li class="d-inline middot"><a href=/tags/code>code</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>The MySQL enum field provides a nice compromise - the space efficiency of using an integer, the human readability of text, and basic type safety. Yet I had this vague recollection of reading something that made it seem enums carried a ton of risks when changing the column definition so wanted to see if I could “break” it. Turns out it’s a lot more resilient than I thought. I went through a series of combinations - ranging from changing the order of the enums in the definition to trying to insert values that didn’t exist but in every case it handled it as expected. Doing a bit of research I discovered how MySQL represents the enum type. Rather than storing the values in a specific order MySQL supposedly creates a map-like structure to relate the integer values with their enum counterparts. This allows you to change the order of the enum definition without changing the underlying map or any of the stored values. I still wouldn’t use enums for anything that would require a join but for storing small and simple sets of data it works great.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>drop</span> <span style=color:#66d9ef>table</span> <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>exists</span> test;

<span style=color:#75715e>-- Create the toy table
</span><span style=color:#75715e></span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>table</span> test (
  id int auto_increment <span style=color:#66d9ef>primary</span> <span style=color:#66d9ef>key</span>,
  e enum(<span style=color:#e6db74>&#39;a&#39;</span>,<span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>)
);

<span style=color:#75715e>-- Populate it with some sample values
</span><span style=color:#75715e></span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> test (e) <span style=color:#66d9ef>values</span> (<span style=color:#e6db74>&#39;a&#39;</span>), (<span style=color:#e6db74>&#39;b&#39;</span>), (<span style=color:#e6db74>&#39;c&#39;</span>);

<span style=color:#75715e>-- Confirm they look good
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;

<span style=color:#75715e>-- Now let&#39;s add another possible enum value
</span><span style=color:#75715e></span><span style=color:#66d9ef>alter</span> <span style=color:#66d9ef>table</span> test <span style=color:#66d9ef>modify</span> <span style=color:#66d9ef>column</span> e enum(<span style=color:#e6db74>&#39;a&#39;</span>,<span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>);

<span style=color:#75715e>-- Looks good
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;

<span style=color:#75715e>-- Add some more values
</span><span style=color:#75715e></span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> test (e) <span style=color:#66d9ef>values</span> (<span style=color:#e6db74>&#39;d&#39;</span>),(<span style=color:#e6db74>&#39;a&#39;</span>), (<span style=color:#e6db74>&#39;b&#39;</span>), (<span style=color:#e6db74>&#39;c&#39;</span>);

<span style=color:#75715e>-- Looks good
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;

<span style=color:#75715e>-- Change the order around
</span><span style=color:#75715e></span><span style=color:#66d9ef>alter</span> <span style=color:#66d9ef>table</span> test <span style=color:#66d9ef>modify</span> <span style=color:#66d9ef>column</span> e enum(<span style=color:#e6db74>&#39;a&#39;</span>,<span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;e&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>);

<span style=color:#75715e>-- Looks the same
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;

<span style=color:#75715e>-- Change it again
</span><span style=color:#75715e></span><span style=color:#66d9ef>alter</span> <span style=color:#66d9ef>table</span> test <span style=color:#66d9ef>modify</span> <span style=color:#66d9ef>column</span> e enum(<span style=color:#e6db74>&#39;a&#39;</span>,<span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>,<span style=color:#e6db74>&#39;e&#39;</span>);

<span style=color:#75715e>-- Looks the same
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;

<span style=color:#75715e>-- Add and change the order
</span><span style=color:#75715e></span><span style=color:#66d9ef>alter</span> <span style=color:#66d9ef>table</span> test <span style=color:#66d9ef>modify</span> <span style=color:#66d9ef>column</span> e enum(<span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>,<span style=color:#e6db74>&#39;e&#39;</span>,<span style=color:#e6db74>&#39;f&#39;</span>,<span style=color:#e6db74>&#39;a&#39;</span>);

<span style=color:#75715e>-- Looks the same
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;

<span style=color:#75715e>-- Fails since &#39;g&#39; is not a valid value
</span><span style=color:#75715e></span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> test (e) <span style=color:#66d9ef>values</span> (<span style=color:#e6db74>&#39;g&#39;</span>);

<span style=color:#75715e>-- Replace &#39;a&#39; with &#39;f&#39;
</span><span style=color:#75715e></span><span style=color:#66d9ef>update</span> test <span style=color:#66d9ef>set</span> e <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;f&#39;</span> <span style=color:#66d9ef>where</span> e <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;a&#39;</span>;

<span style=color:#75715e>-- Now get rid of &#39;a&#39;
</span><span style=color:#75715e></span><span style=color:#66d9ef>alter</span> <span style=color:#66d9ef>table</span> test <span style=color:#66d9ef>modify</span> <span style=color:#66d9ef>column</span> e enum(<span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>,<span style=color:#e6db74>&#39;e&#39;</span>,<span style=color:#e6db74>&#39;f&#39;</span>,<span style=color:#e6db74>&#39;g&#39;</span>);

<span style=color:#75715e>-- Now add &#39;a&#39; back in
</span><span style=color:#75715e></span><span style=color:#66d9ef>alter</span> <span style=color:#66d9ef>table</span> test <span style=color:#66d9ef>modify</span> <span style=color:#66d9ef>column</span> e enum(<span style=color:#e6db74>&#39;a&#39;</span>, <span style=color:#e6db74>&#39;b&#39;</span>,<span style=color:#e6db74>&#39;c&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>,<span style=color:#e6db74>&#39;e&#39;</span>,<span style=color:#e6db74>&#39;f&#39;</span>,<span style=color:#e6db74>&#39;g&#39;</span>);

<span style=color:#75715e>-- Now swap &#39;f&#39; back with &#39;a&#39;
</span><span style=color:#75715e></span><span style=color:#66d9ef>update</span> test <span style=color:#66d9ef>set</span> e <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;a&#39;</span> <span style=color:#66d9ef>where</span> e <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;f&#39;</span>;

<span style=color:#75715e>-- Looks just like before
</span><span style=color:#75715e></span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> test;</code></pre></div></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2016/03/06/airbnb-uber-and-local-laws/>« Airbnb, Uber, and local laws</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2016/03/13/approach-work-like-the-gym/>Approach work like the gym »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2021 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li><li><a href=/index.xml class=mr-0>RSS</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script><script>window.addEventListener('load',function(){hljs.initHighlighting();},true);</script></body></html>