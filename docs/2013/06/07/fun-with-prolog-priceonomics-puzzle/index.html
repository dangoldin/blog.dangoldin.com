







<!DOCTYPE html>
<html ⚡ lang="en">
  <head>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700' rel='stylesheet' type='text/css'>
  <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
  <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
  <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  <!-- TODO: Make this optional -->
  <script async custom-element="amp-vimeo" src="https://cdn.ampproject.org/v0/amp-vimeo-0.1.js"></script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Fun with Prolog: Priceonomics Puzzle</title>
  <meta name="description" content="I attempt to solve the Priceonomics Puzzle using Prolog.">
  <meta name="keywords" content="prolog, priceonomics puzzle, priceonomics" />
  <meta name="author" content="Dan Goldin">

  <link rel="canonical" href="http://dangoldin.com/2013/06/07/fun-with-prolog-priceonomics-puzzle/">
  <link rel="alternate" type="application/rss+xml" title="Dan Goldin" href="http://dangoldin.com/atom.xml">

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dangoldin" />
  <meta name="twitter:title" content="Fun with Prolog: Priceonomics Puzzle" />

  <meta property="og:type"                content="website" />
  <meta property="og:site_name"           content="Dan Goldin" />
  <meta property="og:url"                 content="http://dangoldin.com/2013/06/07/fun-with-prolog-priceonomics-puzzle/" />
  <meta property="og:title"               content="Fun with Prolog: Priceonomics Puzzle" />

  
  <meta property="og:description"         content="I attempt to solve the Priceonomics Puzzle using Prolog." />
  <meta name="twitter:description"        content="I attempt to solve the Priceonomics Puzzle using Prolog." />
  

  

  <link rel="shortcut icon" type="image/png" href="/favicon.png">

  <script type="application/ld+json">
  
{
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": "http://dangoldin.com/2013/06/07/fun-with-prolog-priceonomics-puzzle/",
  "headline": "Fun with Prolog: Priceonomics Puzzle",
  "datePublished": "2013-06-07T00:00:00-07:00",
  "dateModified": "2013-06-07T00:00:00-07:00",
  "description": "The Priceonomics blog is one of my favorites so when I saw that they had a programming puzzle up I decided to have some fun with it. And what’s more fun than...",
  "author": {
    "@type": "Person",
    "name": ""
  },
  "publisher": {
    "@type": "Organization",
    "name": "Dan Goldin",
    "logo": {
      "@type": "ImageObject",
      "url": "http://dangoldin.com",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "http://dangoldin.com",
    "height": 60,
    "width": 60
  }
}

  </script>

  <style amp-custom>
  /**
 * Syntax highlighting styles
 */
.highlight {
  background: #fff; }
  .highlighter-rouge .highlight {
    background: #eef; }
  .highlight .c {
    color: #998;
    font-style: italic; }
  .highlight .err {
    color: #a61717;
    background-color: #e3d2d2; }
  .highlight .k {
    font-weight: bold; }
  .highlight .o {
    font-weight: bold; }
  .highlight .cm {
    color: #998;
    font-style: italic; }
  .highlight .cp {
    color: #999;
    font-weight: bold; }
  .highlight .c1 {
    color: #998;
    font-style: italic; }
  .highlight .cs {
    color: #999;
    font-weight: bold;
    font-style: italic; }
  .highlight .gd {
    color: #000;
    background-color: #fdd; }
  .highlight .gd .x {
    color: #000;
    background-color: #faa; }
  .highlight .ge {
    font-style: italic; }
  .highlight .gr {
    color: #a00; }
  .highlight .gh {
    color: #999; }
  .highlight .gi {
    color: #000;
    background-color: #dfd; }
  .highlight .gi .x {
    color: #000;
    background-color: #afa; }
  .highlight .go {
    color: #888; }
  .highlight .gp {
    color: #555; }
  .highlight .gs {
    font-weight: bold; }
  .highlight .gu {
    color: #aaa; }
  .highlight .gt {
    color: #a00; }
  .highlight .kc {
    font-weight: bold; }
  .highlight .kd {
    font-weight: bold; }
  .highlight .kp {
    font-weight: bold; }
  .highlight .kr {
    font-weight: bold; }
  .highlight .kt {
    color: #458;
    font-weight: bold; }
  .highlight .m {
    color: #099; }
  .highlight .s {
    color: #d14; }
  .highlight .na {
    color: #008080; }
  .highlight .nb {
    color: #0086B3; }
  .highlight .nc {
    color: #458;
    font-weight: bold; }
  .highlight .no {
    color: #008080; }
  .highlight .ni {
    color: #800080; }
  .highlight .ne {
    color: #900;
    font-weight: bold; }
  .highlight .nf {
    color: #900;
    font-weight: bold; }
  .highlight .nn {
    color: #555; }
  .highlight .nt {
    color: #000080; }
  .highlight .nv {
    color: #008080; }
  .highlight .ow {
    font-weight: bold; }
  .highlight .w {
    color: #bbb; }
  .highlight .mf {
    color: #099; }
  .highlight .mh {
    color: #099; }
  .highlight .mi {
    color: #099; }
  .highlight .mo {
    color: #099; }
  .highlight .sb {
    color: #d14; }
  .highlight .sc {
    color: #d14; }
  .highlight .sd {
    color: #d14; }
  .highlight .s2 {
    color: #d14; }
  .highlight .se {
    color: #d14; }
  .highlight .sh {
    color: #d14; }
  .highlight .si {
    color: #d14; }
  .highlight .sx {
    color: #d14; }
  .highlight .sr {
    color: #009926; }
  .highlight .s1 {
    color: #d14; }
  .highlight .ss {
    color: #990073; }
  .highlight .bp {
    color: #999; }
  .highlight .vc {
    color: #008080; }
  .highlight .vg {
    color: #008080; }
  .highlight .vi {
    color: #008080; }
  .highlight .il {
    color: #099; }

.icon > svg {
  display: inline-block;
  width: 16px;
  height: 16px;
  vertical-align: middle; }
  .icon > svg path {
    fill: #828282; }

amp-img {
  background-color: grey; }

.cf:after {
  content: "";
  display: table;
  clear: both; }

main {
  display: block; }

body {
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-font-feature-settings: "liga=1, dlig=1";
  -ms-font-feature-settings: "liga", "dlig";
  -webkit-font-feature-settings: "liga", "dlig";
  -o-font-feature-settings: "liga", "dlig";
  font-feature-settings: "liga", "dlig"; }

h1, h2, h3, h4, h5 {
  color: #222;
  font-weight: 300; }

h1 {
  font-size: 40px;
  line-height: 45px; }

h2 {
  font-size: 36px;
  line-height: 40px; }

h3 {
  font-size: 30px;
  line-height: 34px; }

h4 {
  font-size: 18px;
  line-height: 20px; }

h1 small {
  font-size: 20px;
  color: #666;
  font-weight: 300; }

li {
  font-size: 20px;
  line-height: 32px;
  padding-bottom: 8px; }

ul.tags {
  list-style: none outside;
  margin: 0;
  padding: 0;
  padding-top: 20px; }
  ul.tags li {
    display: inline;
    list-style-type: none;
    padding-right: 10px;
    font-size: 16px;
    line-height: 20px; }

.follow-footer {
  font-size: 16px;
  margin-top: 20px; }

[class^="icon-"], [class*=" icon-"] {
  display: inline-block; }

.main-content {
  margin-left: auto;
  margin-right: auto;
  max-width: 840px; }

.site-header {
  position: relative;
  width: 100%;
  max-width: 700px;
  margin: 16px auto 0 auto;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }
  @media only screen and (max-width: 700px) {
    .site-header {
      padding: 0 16px; } }

a {
  text-decoration: none;
  color: #06A; }
  a :visited {
    color: #607890; }
  a :hover {
    color: #005580; }

.avatar-section {
  display: flex;
  flex-direction: row; }
  .avatar-section #avatar {
    background-image: url("/assets/static/images/photo.jpg");
    background-size: cover;
    height: 154px;
    width: 154px;
    display: block;
    border-radius: 50%;
    margin-bottom: 8px;
    border: 2px solid #999;
    opacity: .8;
    -webkit-transition: all 500ms ease-in;
    -moz-transition: all 500ms ease-in;
    -o-transition: all 500ms ease-in;
    margin-left: 22px; }
  .avatar-section ul {
    list-style: none outside;
    margin-bottom: 20px; }
    .avatar-section ul li {
      line-height: 23px;
      font-family: 'Open Sans', sans-serif;
      font-weight: 300; }

#social li {
  display: inline-block;
  font-size: 22px;
  overflow: hidden; }
#social a, #social a:visited {
  color: #999;
  -webkit-transition: color 200ms ease-in;
  -moz-transition: color 200ms ease-in;
  -o-transition: color 200ms ease-in; }

a.icon-envelope {
  background: url("/assets/static/images/icons/webicon-mail.png");
  background-size: 20px 20px;
  width: 20px;
  height: 20px;
  margin-left: 5px; }

a.icon-glossi {
  background: url("/assets/static/images/icons/webicon-glossi.png");
  background-size: 20px 20px;
  width: 20px;
  height: 20px;
  margin-left: 5px; }

a.icon-github {
  background: url("/assets/static/images/icons/webicon-github.png");
  background-size: 20px 20px;
  width: 20px;
  height: 20px;
  margin-left: 5px; }

a.icon-twitter {
  background: url("/assets/static/images/icons/webicon-twitter.png");
  background-size: 20px 20px;
  width: 20px;
  height: 20px;
  margin-left: 5px; }

a.icon-linkedin {
  background: url("/assets/static/images/icons/webicon-linkedin.png");
  background-size: 20px 20px;
  width: 20px;
  height: 20px;
  margin-left: 5px; }

a.icon-feedly {
  background: url("/assets/static/images/icons/webicon-feedly.png");
  background-size: 20px 20px;
  width: 20px;
  height: 20px;
  margin-left: 5px; }

ul.posts, ol.posts {
  list-style: none outside;
  padding: 0;
  margin: 40px 25px 10px 25px; }
  ul.posts span.date, ol.posts span.date {
    text-align: right;
    color: #999;
    float: right;
    font-family: 'Gentium Book Basic', serif; }
  ul.posts li, ol.posts li {
    font-family: 'Open Sans', sans-serif;
    font-size: 21px;
    line-height: 32px;
    font-weight: 400; }

ul.thumbnails {
  list-style: none outside; }
  ul.thumbnails div.thumbnail {
    max-width: 700px; }

.content {
  width: 100%;
  max-width: 700px;
  margin: 25px auto 0 auto;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }
  @media only screen and (max-width: 700px) {
    .content {
      padding: 0 16px; } }
  .content article {
    padding: 10px 0;
    border-bottom: 1px solid #f2f2f0; }
    .content article:last-child {
      border-bottom: 0px; }
    .content article .post-title, .content article .page-title {
      letter-spacing: -0.02em;
      font-style: normal;
      display: block;
      font-size: 36px;
      line-height: 1.15;
      margin: 0 0; }
      .content article .post-title a, .content article .page-title a {
        text-decoration: none;
        color: #333332; }
        .content article .post-title a:hover, .content article .page-title a:hover {
          text-decoration: none; }
    .content article .post-meta, .content article .page-meta {
      font-size: 14px;
      color: #b3b3b1;
      line-height: 30px; }
      .content article .post-meta a, .content article .page-meta a {
        color: #b3b3b1;
        text-decoration: none; }
        .content article .post-meta a:hover, .content article .page-meta a:hover {
          text-decoration: underline; }

.pagination {
  text-align: center;
  padding: 16px 0 0;
  font-size: 12px; }
  .pagination a {
    color: #999999;
    text-decoration: none; }
    .pagination a:hover {
      color: #333333; }
  .pagination ul {
    display: inline-block;
    margin: 0; }
    .pagination ul li {
      display: inline; }

.site-footer {
  margin: 0 auto;
  padding: 48px 0;
  width: 100%;
  max-width: 700px;
  font-size: 12px;
  text-align: center;
  color: #999999;
  line-height: 17.6px; }
  .site-footer a {
    color: #666666;
    text-decoration: none; }
    .site-footer a:hover {
      color: #333333; }

.post .post-meta, .post .page-meta, .page .post-meta, .page .page-meta {
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
.post .post-title, .post .page-title, .page .post-title, .page .page-title {
  font-style: normal;
  letter-spacing: -0.04em;
  font-size: 50px;
  line-height: 1.1;
  color: #333332;
  margin-bottom: 50px; }
.post .post-meta-text, .post .page-meta-text, .page .post-meta-text, .page .page-meta-text {
  color: #b3b3b1;
  letter-spacing: -0.02em;
  font-style: normal;
  font-size: 14px;
  overflow: hidden;
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif;
  white-space: nowrap;
  text-overflow: ellipsis; }
.post .post-content, .post .page-content, .page .post-content, .page .page-content {
  width: 100%;
  font-family: Georgia, Cambria, "Times New Roman", Times, "Lora", serif;
  color: #333333; }
  .post .post-content h1, .post .post-content h2, .post .post-content h3, .post .page-content h1, .post .page-content h2, .post .page-content h3, .page .post-content h1, .page .post-content h2, .page .post-content h3, .page .page-content h1, .page .page-content h2, .page .page-content h3 {
    font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
  .post .post-content h3, .post .post-content h4, .post .post-content h5, .post .post-content h6, .post .page-content h3, .post .page-content h4, .post .page-content h5, .post .page-content h6, .page .post-content h3, .page .post-content h4, .page .post-content h5, .page .post-content h6, .page .page-content h3, .page .page-content h4, .page .page-content h5, .page .page-content h6 {
    letter-spacing: -0.02em;
    font-style: normal;
    font-size: 24px;
    line-height: 1.3;
    margin-top: 50px;
    margin-bottom: 0px;
    font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
  .post .post-content h1, .post .post-content h2, .post .page-content h1, .post .page-content h2, .page .post-content h1, .page .post-content h2, .page .page-content h1, .page .page-content h2 {
    letter-spacing: -0.02em;
    font-weight: 300;
    font-style: normal;
    font-size: 42px;
    line-height: 1.2;
    margin-top: 50px;
    margin-bottom: 0px; }
  .post .post-content h3, .post .page-content h3, .page .post-content h3, .page .page-content h3 {
    font-size: 30px;
    line-height: 34px;
    font-weight: 300; }
  .post .post-content p, .post .page-content p, .page .post-content p, .page .page-content p {
    font-weight: 400;
    font-style: normal;
    font-size: 22px;
    line-height: 1.59;
    letter-spacing: -.002em;
    margin-top: 30px;
    margin-bottom: 0;
    color: #333333;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    hyphens: auto; }
    .post .post-content p.caption, .post .page-content p.caption, .page .post-content p.caption, .page .page-content p.caption {
      font-size: 18px;
      line-height: 1.2;
      margin-top: 2px;
      text-align: center;
      padding: 16px 40px 0 40px; }
  .post .post-content amp-img, .post .post-content amp-youtube, .post .page-content amp-img, .post .page-content amp-youtube, .page .post-content amp-img, .page .post-content amp-youtube, .page .page-content amp-img, .page .page-content amp-youtube {
    margin-top: 30px; }
  .post .post-content figure, .post .page-content figure, .page .post-content figure, .page .page-content figure {
    margin: 0;
    padding: 0; }
  .post .post-content figcaption, .post .page-content figcaption, .page .post-content figcaption, .page .page-content figcaption {
    font-weight: 400;
    font-style: italic;
    font-size: 16px;
    line-height: 1.3;
    color: #666665;
    outline: 0;
    z-index: 300;
    text-align: center; }
  .post .post-content hr, .post .page-content hr, .page .post-content hr, .page .page-content hr {
    border: 0;
    padding: 0;
    display: block;
    width: 15%;
    margin: 30px auto;
    border: 0px solid #dddddd;
    border-top: 1px solid #dddddd; }
  .post .post-content blockquote, .post .page-content blockquote, .page .post-content blockquote, .page .page-content blockquote {
    margin: 20px 0 20px;
    margin-left: -26px;
    border-left: 3px solid #57ad68;
    padding-left: 20px; }
    .post .post-content blockquote p, .post .page-content blockquote p, .page .post-content blockquote p, .page .page-content blockquote p {
      letter-spacing: 0.01rem;
      font-weight: 400;
      mborder-left: 3px solid #57ad68;
      mpadding-left: 20px;
      mmargin-left: -26px;
      padding-bottom: 3px;
      font-size: 20px;
      line-height: 1.3;
      padding-bottom: 10px; }
  .post .post-content ul, .post .post-content ol, .post .page-content ul, .post .page-content ol, .page .post-content ul, .page .post-content ol, .page .page-content ul, .page .page-content ol {
    padding: 0;
    margin: 10px 0 10px 25px; }
    .post .post-content ul.inline, .post .post-content ol.inline, .post .page-content ul.inline, .post .page-content ol.inline, .page .post-content ul.inline, .page .post-content ol.inline, .page .page-content ul.inline, .page .page-content ol.inline {
      margin-left: 0;
      list-style: none; }
      .post .post-content ul.inline li, .post .post-content ol.inline li, .post .page-content ul.inline li, .post .page-content ol.inline li, .page .post-content ul.inline li, .page .post-content ol.inline li, .page .page-content ul.inline li, .page .page-content ol.inline li {
        display: inline-block;
        padding-right: 5px;
        padding-left: 5px;
        margin: 0; }
        .post .post-content ul.inline li.dense, .post .post-content ol.inline li.dense, .post .page-content ul.inline li.dense, .post .page-content ol.inline li.dense, .page .post-content ul.inline li.dense, .page .post-content ol.inline li.dense, .page .page-content ul.inline li.dense, .page .page-content ol.inline li.dense {
          padding-top: 0;
          margin-bottom: 2px; }
    .post .post-content ul li, .post .post-content ol li, .post .page-content ul li, .post .page-content ol li, .page .post-content ul li, .page .post-content ol li, .page .page-content ul li, .page .page-content ol li {
      padding: 0;
      font-weight: 400;
      font-style: normal;
      font-size: 22px;
      line-height: 1.59;
      letter-spacing: -.002em;
      margin-left: 30px;
      margin-bottom: 2px;
      padding-top: 2px; }
      .post .post-content ul li p, .post .post-content ol li p, .post .page-content ul li p, .post .page-content ol li p, .page .post-content ul li p, .page .post-content ol li p, .page .page-content ul li p, .page .page-content ol li p {
        padding: 0 10px 0 10px; }
      .post .post-content ul li.dense, .post .post-content ol li.dense, .post .page-content ul li.dense, .post .page-content ol li.dense, .page .post-content ul li.dense, .page .post-content ol li.dense, .page .page-content ul li.dense, .page .page-content ol li.dense {
        padding-top: 0;
        margin-bottom: 2px; }
    .post .post-content ul.tag_box, .post .post-content ol.tag_box, .post .page-content ul.tag_box, .post .page-content ol.tag_box, .page .post-content ul.tag_box, .page .post-content ol.tag_box, .page .page-content ul.tag_box, .page .page-content ol.tag_box {
      padding-top: 10px; }
  .post .post-content ol li, .post .page-content ol li, .page .post-content ol li, .page .page-content ol li {
    list-style-type: decimal; }

.share {
  text-align: right;
  padding: 20px 0 0; }
  .share a {
    text-decoration: none;
    color: #bbbbbb;
    padding-left: 12px; }
    .share a .hidden {
      display: none; }
    .share a:hover {
      color: #333333; }

.right10 {
  float: right;
  padding-left: 10px;
  min-width: 250px; }

.video-holder {
  padding: 10px 0 10px 0; }

pre, code {
  font-size: 15px;
  border: 1px solid #e8e8e8;
  border-radius: 3px;
  background-color: #eeeeff; }

code {
  padding: 1px 5px; }

pre {
  padding: 8px 12px;
  overflow-x: scroll; }
  pre > code {
    border: 0;
    padding-right: 0;
    padding-left: 0; }

table {
  margin: 10px 0 10px 0;
  border-collapse: collapse; }
  table td {
    border-bottom: 1pt solid #eee;
    padding: 6px 2px 6px 2px;
    border-spacing: 6px; }

.pagination .disabled {
  opacity: 0; }

.comments {
  margin-top: 10px; }

  </style>

  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
</head>

  <body>
    <header class="site-header">
  <div class="avatar-section">
    <a id="avatar" href="/"></a>
    <div>
      <ul id="me">
        <li>Dan Goldin</li>
        <li class="gray">Engineering @ <a href="http://triplelift.com/">TripleLift</a></li>
      </ul>
      <ul id="social">
          <li>
            <a href="mailto:dangoldin@gmail.com?subject=Hey" class="icon-envelope" title="Say hi" id="link-email"></a>
          </li>
          <li>
            <a href="http://github.com/dangoldin" class="icon-github" title="I share and fork code here" id="link-github"></a>
          </li>
          <li>
            <a href="http://twitter.com/dangoldin" class="icon-twitter" title="You should follow me" id="link-twitter"></a>
          </li>
          <li>
            <a href="http://www.linkedin.com/in/dangoldin" class="icon-linkedin" title="My professional stuff here" id="link-linkedin"></a>
          </li>
          <li>
            <a href="http://www.feedly.com/home#subscription/feed%2Fhttp%3A%2F%2Fdangoldin.com%2Fatom.xml" class="icon-feedly" title="Subscribe via Feedly" id="link-feedly"></a>
          </li>
        </ul>
    </div>
    <ul>
      <li><a href="/about">About</a></li>
      <li><a href="/tags/">Tagged Posts</a></li>
    </ul>
  </div>
</header>


    







<main class="content" role="main">
  <article class="post">
    <div class="post-meta">
      <h1 class="post-title">Fun with Prolog: Priceonomics Puzzle</h1>
      <span class="date">07 June 2013</span>
    </div>

    <section class="post-content">
      
<p>The <a href="http://blog.priceonomics.com/" target="_blank">Priceonomics blog</a> is one of my favorites so when I saw that they had a <a href="http://priceonomics.com/jobs/puzzle/" target="_blank">programming puzzle</a> up I decided to have some fun with it. And what’s more fun than hacking around with a quirky, esoteric programming language? I remember having fond memories of playing around with Prolog in middle school so decided to dig it up again in an attempt to solve this puzzle.</p>

<p>Prolog is pretty different than the mainstream programming languages, it belongs to the logic programming language category and relies on defining a variety of relations and then querying these relationships to get results. A simplified way to think about it is you define a set of equations and tell Prolog to “solve for X”.</p>

<p>This leads to some interesting behavior. Many functions end up being bidrectional with the Prolog version of a “concat” function being a good example. The first argument is a list, the second is the separator, and the last is the resulting string. Passing in all 3 will return true if the concatenation statement is true. Passing in the list and the separator will tell us what the concatenated string is. Passing in the separator and a concatenated string is equivalent to a “split” function. The only piece it’s not able to figure out is the separator given the list and the concatenated string. Unfortunately, I’m not familiar enough with Prolog to explain why.</p>

<figure class="highlight"><pre><code class="language-prolog" data-lang="prolog"><span class="o">?-</span> <span class="ss">atomic_list_concat</span><span class="p">([</span><span class="ss">'Prolog'</span><span class="p">,</span> <span class="ss">'is'</span><span class="p">,</span> <span class="ss">'sweet'</span><span class="p">],</span> <span class="ss">' '</span><span class="p">,</span> <span class="ss">'Prolog is sweet'</span><span class="p">).</span>
<span class="ss">true</span><span class="p">.</span>

<span class="o">?-</span> <span class="ss">atomic_list_concat</span><span class="p">([</span><span class="ss">'Prolog'</span><span class="p">,</span> <span class="ss">'is'</span><span class="p">,</span> <span class="ss">'sweet'</span><span class="p">],</span> <span class="ss">' '</span><span class="p">,</span> <span class="ss">'Prolog is not sweet'</span><span class="p">).</span>
<span class="ss">false</span><span class="p">.</span>

<span class="o">?-</span> <span class="ss">atomic_list_concat</span><span class="p">([</span><span class="ss">'Prolog'</span><span class="p">,</span> <span class="ss">'is'</span><span class="p">,</span> <span class="ss">'sweet'</span><span class="p">],</span> <span class="ss">' '</span><span class="p">,</span> <span class="nv">X</span><span class="p">).</span>
<span class="nv">X</span> <span class="o">=</span> <span class="ss">'Prolog is sweet'</span><span class="p">.</span>

<span class="o">?-</span> <span class="ss">atomic_list_concat</span><span class="p">(</span><span class="nv">L</span><span class="p">,</span> <span class="ss">' '</span><span class="p">,</span> <span class="ss">'Prolog is sweet'</span><span class="p">).</span>
<span class="nv">L</span> <span class="o">=</span> <span class="p">[</span><span class="ss">'Prolog'</span><span class="p">,</span> <span class="ss">is</span><span class="p">,</span> <span class="ss">sweet</span><span class="p">].</span>

<span class="o">?-</span> <span class="ss">atomic_list_concat</span><span class="p">([</span><span class="ss">'Prolog'</span><span class="p">,</span> <span class="ss">is</span><span class="p">,</span> <span class="ss">sweet</span><span class="p">],</span> <span class="nv">X</span><span class="p">,</span> <span class="ss">'Prolog is sweet'</span><span class="p">).</span>
<span class="nv">ERROR</span><span class="o">:</span> <span class="ss">atomic_list_concat</span><span class="o">/</span><span class="m">3</span><span class="o">:</span> <span class="nv">Arguments</span> <span class="ss">are</span> <span class="ss">not</span> <span class="ss">sufficiently</span> <span class="ss">instantiated</span></code></pre></figure>

<p>For the first pass, I decided to ignore the web side and just focus on defining the exchange rate relationships and have Prolog tell me which exchanges would work. The way it works is that we define a profit to be defined in terms of two intermediate currencies. We can then ask Prolog to give us the currency chain that will result in a profit.</p>

<figure class="highlight"><pre><code class="language-prolog" data-lang="prolog"><span class="ss">exchange</span><span class="p">(</span><span class="ss">usd</span><span class="p">,</span><span class="ss">eur</span><span class="p">,</span><span class="mf">0.7779</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">usd</span><span class="p">,</span><span class="ss">jpy</span><span class="p">,</span><span class="mf">102.459</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">usd</span><span class="p">,</span><span class="ss">btc</span><span class="p">,</span><span class="mf">0.0083</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">eur</span><span class="p">,</span><span class="ss">usd</span><span class="p">,</span><span class="mf">1.2851</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">eur</span><span class="p">,</span><span class="ss">jpy</span><span class="p">,</span><span class="mf">131.711</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">eur</span><span class="p">,</span><span class="ss">btc</span><span class="p">,</span><span class="mf">0.01125</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">jpy</span><span class="p">,</span><span class="ss">usd</span><span class="p">,</span><span class="mf">0.0098</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">jpy</span><span class="p">,</span><span class="ss">eur</span><span class="p">,</span><span class="mf">0.0075</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">jpy</span><span class="p">,</span><span class="ss">btc</span><span class="p">,</span><span class="mf">0.0000811</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">btc</span><span class="p">,</span><span class="ss">usd</span><span class="p">,</span><span class="mf">115.65</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">btc</span><span class="p">,</span><span class="ss">eur</span><span class="p">,</span><span class="mf">88.8499</span><span class="p">).</span>
<span class="ss">exchange</span><span class="p">(</span><span class="ss">btc</span><span class="p">,</span><span class="ss">jpy</span><span class="p">,</span><span class="mf">12325.44</span><span class="p">).</span>

<span class="err">%</span> <span class="nv">Calculate</span> <span class="ss">profit</span> <span class="ss">for</span> <span class="ss">a</span> <span class="ss">usd</span><span class="o">-&gt;</span><span class="ss">x</span><span class="o">-&gt;</span><span class="ss">y</span><span class="o">-&gt;</span><span class="ss">usd</span> <span class="ss">currency</span> <span class="ss">chain</span>
<span class="ss">profit</span><span class="p">(</span><span class="nv">First</span><span class="p">,</span> <span class="nv">Second</span><span class="p">,</span> <span class="nv">Profit</span><span class="p">)</span> <span class="p">:-</span>
    <span class="ss">exchange</span><span class="p">(</span><span class="ss">usd</span><span class="p">,</span><span class="nv">First</span><span class="p">,</span><span class="nv">P1</span><span class="p">),</span>
    <span class="ss">exchange</span><span class="p">(</span><span class="nv">First</span><span class="p">,</span><span class="nv">Second</span><span class="p">,</span><span class="nv">P2</span><span class="p">),</span>
    <span class="ss">exchange</span><span class="p">(</span><span class="nv">Second</span><span class="p">,</span><span class="ss">usd</span><span class="p">,</span><span class="nv">P3</span><span class="p">),</span>
    <span class="nv">Profit</span> <span class="ss">is</span> <span class="nv">P1</span> <span class="o">*</span> <span class="nv">P2</span> <span class="o">*</span> <span class="nv">P3</span><span class="p">.</span>

<span class="ss">arb</span> <span class="p">:-</span>
    <span class="ss">profit</span><span class="p">(</span><span class="nv">First</span><span class="p">,</span> <span class="nv">Second</span><span class="p">,</span> <span class="nv">Profit</span><span class="p">),</span>
    <span class="nv">Profit</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="ss">write</span><span class="p">(</span><span class="ss">'usd '</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="nv">First</span><span class="p">),</span> <span class="ss">write</span><span class="p">(</span><span class="ss">' '</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="nv">Second</span><span class="p">),</span> <span class="ss">write</span><span class="p">(</span><span class="ss">' usd '</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="nv">Profit</span><span class="p">),</span> <span class="ss">nl</span><span class="p">,</span> <span class="ss">fail</span><span class="p">.</span>

<span class="p">:-</span> <span class="ss">arb</span><span class="p">.</span>

<span class="err">%</span> <span class="nv">Results</span><span class="o">:</span>
<span class="ss">usd</span> <span class="ss">eur</span> <span class="ss">jpy</span> <span class="ss">usd</span> <span class="mf">1.0040882716200001</span>
<span class="ss">usd</span> <span class="ss">eur</span> <span class="ss">btc</span> <span class="ss">usd</span> <span class="mf">1.0120965187500002</span>
<span class="ss">usd</span> <span class="ss">btc</span> <span class="ss">jpy</span> <span class="ss">usd</span> <span class="mf">1.0025512896</span></code></pre></figure>

<p>The next step was to get it to retrieve and parse the JSON from the Priceonomics server. After doing a ton of searches and reading a ton of documentation I was able to get it to work. As a next step I’ll try to see if I can get it to return currency chains of arbitrary length.</p>

<figure class="highlight"><pre><code class="language-prolog" data-lang="prolog"><span class="p">:-</span> <span class="ss">use_module</span><span class="p">(</span><span class="ss">library</span><span class="p">(</span><span class="ss">'http/json'</span><span class="p">)).</span>
<span class="p">:-</span> <span class="ss">use_module</span><span class="p">(</span><span class="ss">library</span><span class="p">(</span><span class="ss">'http/json_convert'</span><span class="p">)).</span>
<span class="p">:-</span> <span class="ss">use_module</span><span class="p">(</span><span class="ss">library</span><span class="p">(</span><span class="ss">'http/http_json'</span><span class="p">)).</span>
<span class="p">:-</span> <span class="ss">use_module</span><span class="p">(</span><span class="ss">library</span><span class="p">(</span><span class="ss">'http/http_client'</span><span class="p">)).</span>
<span class="p">:-</span> <span class="ss">use_module</span><span class="p">(</span><span class="ss">library</span><span class="p">(</span><span class="ss">'http/http_open'</span><span class="p">)).</span>

<span class="ss">parse</span><span class="p">(</span><span class="nv">I</span><span class="p">)</span> <span class="p">:-</span>
    <span class="ss">test</span><span class="p">(</span><span class="nv">CP</span><span class="o">=</span><span class="nv">S</span><span class="p">)</span> <span class="o">=</span> <span class="ss">test</span><span class="p">(</span><span class="nv">I</span><span class="p">),</span>
    <span class="ss">atomic_list_concat</span><span class="p">(</span><span class="nv">L</span><span class="p">,</span><span class="ss">'_'</span><span class="p">,</span> <span class="nv">CP</span><span class="p">),</span>
    <span class="p">[</span><span class="nv">A</span><span class="p">,</span> <span class="nv">B</span><span class="p">]</span> <span class="o">=</span> <span class="nv">L</span><span class="p">,</span>
    <span class="ss">atom_number</span><span class="p">(</span><span class="nv">S</span><span class="p">,</span><span class="nv">R</span><span class="p">),</span>
    <span class="ss">assert</span><span class="p">(</span><span class="ss">exchange</span><span class="p">(</span><span class="nv">A</span><span class="p">,</span><span class="nv">B</span><span class="p">,</span><span class="nv">R</span><span class="p">)).</span>

<span class="err">%</span> <span class="nv">Calculate</span> <span class="ss">profit</span> <span class="ss">for</span> <span class="ss">a</span> <span class="ss">usd</span><span class="o">-&gt;</span><span class="ss">x</span><span class="o">-&gt;</span><span class="ss">y</span><span class="o">-&gt;</span><span class="ss">usd</span> <span class="ss">currency</span> <span class="ss">chain</span>
<span class="ss">profit</span><span class="p">(</span><span class="nv">First</span><span class="p">,</span> <span class="nv">Second</span><span class="p">,</span> <span class="nv">Profit</span><span class="p">)</span> <span class="p">:-</span>
    <span class="ss">exchange</span><span class="p">(</span><span class="ss">'USD'</span><span class="p">,</span><span class="nv">First</span><span class="p">,</span><span class="nv">P1</span><span class="p">),</span>
    <span class="ss">exchange</span><span class="p">(</span><span class="nv">First</span><span class="p">,</span><span class="nv">Second</span><span class="p">,</span><span class="nv">P2</span><span class="p">),</span>
    <span class="ss">exchange</span><span class="p">(</span><span class="nv">Second</span><span class="p">,</span><span class="ss">'USD'</span><span class="p">,</span><span class="nv">P3</span><span class="p">),</span>
    <span class="nv">Profit</span> <span class="ss">is</span> <span class="nv">P1</span> <span class="o">*</span> <span class="nv">P2</span> <span class="o">*</span> <span class="nv">P3</span><span class="p">.</span>

<span class="ss">arb</span> <span class="p">:-</span>
    <span class="ss">http_get</span><span class="p">(</span><span class="ss">'http://fx.priceonomics.com/v1/rates/'</span><span class="p">,</span> <span class="nv">JsonIn</span><span class="p">,</span> <span class="p">[]),</span>
    <span class="ss">json_to_prolog</span><span class="p">(</span><span class="nv">JsonIn</span><span class="p">,</span><span class="nv">PrologIn</span><span class="p">),</span>
    <span class="nv">PrologIn</span> <span class="o">=</span> <span class="ss">json</span><span class="p">(</span><span class="nv">L</span><span class="p">),</span>
    <span class="ss">maplist</span><span class="p">(</span><span class="ss">parse</span><span class="p">,</span> <span class="nv">L</span><span class="p">),</span>
    <span class="ss">profit</span><span class="p">(</span><span class="nv">First</span><span class="p">,</span> <span class="nv">Second</span><span class="p">,</span> <span class="nv">Profit</span><span class="p">),</span>
    <span class="nv">Profit</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="ss">not</span><span class="p">(</span><span class="nv">First</span> <span class="o">=</span> <span class="nv">Second</span><span class="p">),</span>
    <span class="ss">not</span><span class="p">(</span><span class="nv">First</span> <span class="o">=</span> <span class="ss">'USD'</span><span class="p">),</span>
    <span class="ss">not</span><span class="p">(</span><span class="nv">Second</span> <span class="o">=</span> <span class="ss">'USD'</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="ss">'USD '</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="nv">First</span><span class="p">),</span> <span class="ss">write</span><span class="p">(</span><span class="ss">' '</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="nv">Second</span><span class="p">),</span> <span class="ss">write</span><span class="p">(</span><span class="ss">' USD '</span><span class="p">),</span>
    <span class="ss">write</span><span class="p">(</span><span class="nv">Profit</span><span class="p">),</span> <span class="ss">nl</span><span class="p">,</span> <span class="ss">fail</span><span class="p">.</span>

<span class="p">:-</span> <span class="ss">arb</span><span class="p">.</span>

<span class="err">%</span> <span class="nv">Results</span> <span class="p">(</span><span class="nv">Might</span> <span class="ss">change</span> <span class="ss">each</span> <span class="ss">run</span><span class="p">)</span><span class="o">:</span>
<span class="nv">USD</span> <span class="nv">JPY</span> <span class="nv">EUR</span> <span class="nv">USD</span> <span class="mf">1.0071833283714342</span>
<span class="nv">USD</span> <span class="nv">EUR</span> <span class="nv">JPY</span> <span class="nv">USD</span> <span class="mf">1.007164983424893</span></code></pre></figure>

<p>I’m sure a Prolog pro would have been able to do this much quicker and better but I had a surprisingly fun time doing it. I got a bit frustrated trying to translate the JSON into Prolog relationships but actually getting it to work made it worth it. Trying a whole new programming category is a great way to get more creative and forces us to think about problems differently. Prolog may not be the most practical language but exposing us to new concepts and approaches makes it valuable.</p>

    </section>

    
    <div>
      <ul class="tags">
        <li>Tagged under:</li>
      
      


  <!-- <li>Tagged under:</li> -->
  
    
      <li><a href="/tags/##prolog-ref">#prolog </a></li>
    
      <li><a href="/tags/##code-ref">#code </a></li>
    
  



      </ul>
    </div><br/>
    

    <div class="follow-footer">
      Liked this post? Follow me on Twitter <a href="https://twitter.com/dangoldin">here</a>.
    </div>

    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2013/06/04/citibike-directions-second-attempt/" title="Citibike Directions: Second Attempt">&larr; Prev</a> | </li>
      
        <li><a href="/archive/">Archive</a></li>
      
        <li class="next"> | <a href="/2013/06/12/constantly-entertained/" title="Constantly entertained">Next &rarr;</a></li>
      
      </ul>
    </div>

    <div class="comments">
      <amp-iframe
        height="300"
        sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
        resizable
        frameborder="0"
        src="https://s3.amazonaws.com/dangoldin.com/amp-disqus.html?url=http%3A%2F%2Fdangoldin.com%2F2013%2F06%2F07%2Ffun-with-prolog-priceonomics-puzzle%2F&title=Fun+with+Prolog%3A+Priceonomics+Puzzle">
        <div overflow tabindex="0" role="button" aria-label="Read more">Read more!</div>
      </amp-iframe>
    </div>

  </article>
</main>

<footer class="site-footer">
  <div class="inner">
    <section class="copyright">All content copyright <a href="mailto:"></a> &copy; 2017 &bull; All rights reserved.</section>
    <section class="poweredby">Made with <a href="http://jekyllrb.com"> Jekyll</a> and <a href="https://github.com/ageitgey/amplify">Amplify</a>. Theme inspired by <a href="http://sirupsen.com/">Simon Hørup Eskildsen</a>.</section>
  </div>
</footer>

<amp-analytics type="googleanalytics" id="analytics1">
<script type="application/json">
{
  "vars": {
    "account": "UA-36313127-1"
  },
  "triggers": {
    "trackPageview": {
      "on": "visible",
      "request": "pageview"
    },
    "trackClickOnEmail" : {
      "on": "click",
      "selector": "#link-email",
      "request": "event",
      "vars": {
        "socialNetwork": "email",
        "socialAction": "email",
        "socialTarget": "mailto:dangoldin@gmail.com?subject=Hey"
      }
    },
    "trackClickOnEmail" : {
      "on": "click",
      "selector": "#link-github",
      "request": "event",
      "vars": {
        "socialNetwork": "github",
        "socialAction": "github",
        "socialTarget": "https://github.com/dangoldin"
      }
    },
    "trackClickOnEmail" : {
      "on": "click",
      "selector": "#link-twitter",
      "request": "event",
      "vars": {
        "socialNetwork": "twitter",
        "socialAction": "twitter",
        "socialTarget": "https://twitter.com/dangoldin"
      }
    },
    "trackClickOnEmail" : {
      "on": "click",
      "selector": "#link-linkedin",
      "request": "event",
      "vars": {
        "socialNetwork": "linkedin",
        "socialAction": "linkedin",
        "socialTarget": "http://www.linkedin.com/in/dangoldin"
      }
    },
    "trackClickOnEmail" : {
      "on": "click",
      "selector": "#link-feedly",
      "request": "event",
      "vars": {
        "socialNetwork": "feedly",
        "socialAction": "feedly",
        "socialTarget": "http://www.feedly.com/home#subscription/feed%2Fhttp%3A%2F%2Fdangoldin.com%2Fatom.xml"
      }
    }
  }
}
</script>
</amp-analytics>


  </body>
</html>

