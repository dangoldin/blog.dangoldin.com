<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Bringing a user centric approach to the command line - Dan Goldin</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content="Rather than have a variety of flags at the command line just infer what the user wants to do."><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2020/11/25/bringing-a-user-centric-approach-to-the-command-line/"><meta property="og:title" content="Bringing a user centric approach to the command line"><meta property="og:image" content="/image/photo.jpg"><meta property="og:description" content="Rather than have a variety of flags at the command line just infer what the user wants to do."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="Bringing a user centric approach to the command line"><meta name=twitter:description content="Rather than have a variety of flags at the command line just infer what the user wants to do."><meta name=twitter:image content="/image/photo.jpg"><link rel=canonical href=/2020/11/25/bringing-a-user-centric-approach-to-the-command-line/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.png><link href=/index.xml rel=alternate type=application/rss+xml title="Dan Goldin"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36313127-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-36313127-1")</script></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">Bringing a user centric approach to the command line</h1><div class="mb-md-4 meta"><span class="date middot" title='Wed Nov 25 2020 00:00:00 UTC'>2020-11-25</span>
<span class="reading-time middot">2 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/code>code</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>I have a <a href=https://github.com/dangoldin/health-stats/blob/master/get_health.py>small script</a> that takes an export of Apple Health data and then dumps it into a MySQL database that I then use to visualize my health metrics over time. My prior workflow was to open the app and then Airdrop the file over to my computer at which point I&rsquo;d unzip it, copy the relevant file over into the script directory, and simply run the script.</p><p>Clearly this was not the smoothest experience and I figured it was finally time to deal with it. I&rsquo;ve seen scripts take a variety of inputs supporting all sorts of formats - for example a &ldquo;-f&rdquo; flag for a file or a &ldquo;-d&rdquo; for a directory - but I was never a fan of that. I want the script to take whatever is thrown at it and then just infer whatever the user intended. It&rsquo;s not an approach you&rsquo;d want in every use case but for a simple script I liked the elegance.</p><p>The implementation was simple enough - if it&rsquo;s a zip file, handle it as a zip file; if it&rsquo;s a directory, append export.xml and handle that as a file; otherwise assume it&rsquo;s a standard file. I&rsquo;m surprised most developers don&rsquo;t adopt this approach - it&rsquo;s bringing a more user-centric experience to the command line.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> fn<span style=color:#f92672>.</span>endswith(<span style=color:#e6db74>&#39;.zip&#39;</span>):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;Handling as zip file&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> zipfile<span style=color:#f92672>.</span>ZipFile(fn) <span style=color:#66d9ef>as</span> fz:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> fz<span style=color:#f92672>.</span>open(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(<span style=color:#e6db74>&#39;apple_health_export&#39;</span>, <span style=color:#e6db74>&#39;export.xml&#39;</span>)) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>            xmldoc <span style=color:#f92672>=</span> minidom<span style=color:#f92672>.</span>parseString(f<span style=color:#f92672>.</span>read())
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>isdir(fn):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;Handling as directory&#39;</span>)
</span></span><span style=display:flex><span>    xmldoc <span style=color:#f92672>=</span> minidom<span style=color:#f92672>.</span>parse( os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(fn, <span style=color:#e6db74>&#39;export.xml&#39;</span>) )
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;Handling as export.xml file&#39;</span>)
</span></span><span style=display:flex><span>    xmldoc <span style=color:#f92672>=</span> minidom<span style=color:#f92672>.</span>parse(fn)</span></span></code></pre></div></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2020/11/22/subconciously-learning-to-type-russian/>« Subconciously learning to type Russian</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2020/11/26/static-code-analysis-with-deepsource/>Static code analysis with DeepSource »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2021 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li><li><a href=/index.xml class=mr-0>RSS</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script>
<script>window.addEventListener("load",function(){hljs.initHighlighting()},!0)</script></body></html>