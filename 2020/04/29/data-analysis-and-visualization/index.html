<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Data analysis and visualization - Dan Goldin</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2020/04/29/data-analysis-and-visualization/"><meta property="og:title" content="Data analysis and visualization"><meta property="og:image" content="//image/sample-weekly-dim1-dim2.png"><meta property="og:description" content><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="Data analysis and visualization"><meta name=twitter:description content><meta name=twitter:image content="//image/sample-weekly-dim1-dim2.png"><link rel=canonical href=/2020/04/29/data-analysis-and-visualization/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.png><link href=/index.xml rel=alternate type=application/rss+xml title="Dan Goldin"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36313127-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-36313127-1')</script></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">Data analysis and visualization</h1><div class="mb-md-4 meta"><span class="date middot" title="Wed Apr 29 2020 00:00:00 UTC">2020-04-29</span>
<span class="reading-time middot">2 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/code>code</a></li><li class="d-inline middot"><a href=/tags/dataviz>dataviz</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>Yesterday I had the rare chance to actually do some coding and realized how rusty I am at numerical analysis in Python. The task was simple - ingest a CSV that had a date column, two categorical columns, and a numerical column - and then generate a grid containing a series of line plots, each of which would be a combination of the two categorical columns.</p><p>I did a ton of this work years ago so knew what was possible. That&rsquo;s half the battle and after a bit of searches I got a working solution. At the same time I&rsquo;m disappointed it took me that long, especially after seeing the brevity of the end result. Software ate the world and now every business is generating tons of data. Being able to make sense of it is an increasingly important skill set especially if you&rsquo;re a leader. It&rsquo;s unfortunately an area I haven&rsquo;t kept up with over the years and something I plan on remedying after this experience.</p><p>I also couldn&rsquo;t help but be inspired by <a href=https://rt.live/>rt.live</a>, if the founders of Instagram have both the skillset and the inclination to do data work it&rsquo;s a good indicator that there&rsquo;s something there.</p><p><img src=/image/sample-weekly-dim1-dim2.png alt="Example screenshot of the grid plot" data-width=6000 data-height=6000 data-layout=responsive></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> pandas <span style=color:#f92672>as</span> pd
<span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#f92672>as</span> plt

plt<span style=color:#f92672>.</span>rcParams<span style=color:#f92672>.</span>update({<span style=color:#e6db74>&#39;font.size&#39;</span>: <span style=color:#ae81ff>6</span>})
plt<span style=color:#f92672>.</span>rcParams<span style=color:#f92672>.</span>update({<span style=color:#e6db74>&#39;figure.figsize&#39;</span>: (<span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>30</span>)})

df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#39;weekly-dim1-dim2.txt&#39;</span>)

<span style=color:#75715e># Fix up dates</span>
df2[<span style=color:#e6db74>&#39;week_dt&#39;</span>] <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>to_datetime(df2[<span style=color:#e6db74>&#39;week&#39;</span>], format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#39;</span>)
df2 <span style=color:#f92672>=</span> df2<span style=color:#f92672>.</span>sort_values(by<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;week_dt&#39;</span>])

<span style=color:#75715e># Get unique vals</span>
dim1 <span style=color:#f92672>=</span> sorted(list(df2[<span style=color:#e6db74>&#39;dim1&#39;</span>]<span style=color:#f92672>.</span>unique()))
dim2 <span style=color:#f92672>=</span> sorted(list(df2[<span style=color:#e6db74>&#39;dim2&#39;</span>]<span style=color:#f92672>.</span>unique()))

plt<span style=color:#f92672>.</span>tight_layout()
fig, axes <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplots(nrows<span style=color:#f92672>=</span>len(d1), ncols<span style=color:#f92672>=</span>len(d2))

<span style=color:#75715e># Generate plots per dim1 and dim2 combination subject to data and threshold</span>
<span style=color:#66d9ef>for</span> i, d1 <span style=color:#f92672>in</span> enumerate(d1):
    <span style=color:#66d9ef>for</span> j, d2 <span style=color:#f92672>in</span> enumerate(d2):
        x <span style=color:#f92672>=</span> df2[(df2[<span style=color:#e6db74>&#39;dim1&#39;</span>]<span style=color:#f92672>==</span>d1) <span style=color:#f92672>&amp;</span> (df2[<span style=color:#e6db74>&#39;dim2&#39;</span>]<span style=color:#f92672>==</span>d2)]
        <span style=color:#66d9ef>if</span> len(x<span style=color:#f92672>.</span>index) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
            x<span style=color:#f92672>.</span>set_index([<span style=color:#e6db74>&#39;week_dt&#39;</span>])[<span style=color:#e6db74>&#39;num&#39;</span>]<span style=color:#f92672>.</span>plot(ax<span style=color:#f92672>=</span>axes[i,j])
            axes[i,j]<span style=color:#f92672>.</span>set_title(str(d1) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#f92672>+</span> str(d2))

plt<span style=color:#f92672>.</span>tight_layout(pad<span style=color:#f92672>=</span><span style=color:#ae81ff>0.4</span>, w_pad<span style=color:#f92672>=</span><span style=color:#ae81ff>0.5</span>, h_pad<span style=color:#f92672>=</span><span style=color:#ae81ff>1.0</span>)
plt<span style=color:#f92672>.</span>savefig(<span style=color:#e6db74>&#39;out.png&#39;</span>, dpi<span style=color:#f92672>=</span><span style=color:#ae81ff>200</span>)</code></pre></div></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2020/04/25/engineering-management-resources/>« Engineering management resources</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2020/05/02/sometimes-it-really-is-just-the-dirty-hard-work/>Sometimes it really is just the dirty, hard work »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2021 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li><li><a href=/index.xml class=mr-0>RSS</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script><script>window.addEventListener('load',function(){hljs.initHighlighting()},!0)</script></body></html>