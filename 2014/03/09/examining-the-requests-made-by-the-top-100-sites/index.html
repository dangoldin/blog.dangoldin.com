<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Examining the requests made by the top 100 sites - Dan Goldin</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content="Following up to my Drowning in JavaScript post I take a look at the top 100 Alexa sites and see how many external files they're loading and the impact that has on page load time."><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2014/03/09/examining-the-requests-made-by-the-top-100-sites/"><meta property="og:title" content="Examining the requests made by the top 100 sites"><meta property="og:image" content="//image/crawl-stats-requests-vs-time.png"><meta property="og:description" content="Following up to my Drowning in JavaScript post I take a look at the top 100 Alexa sites and see how many external files they're loading and the impact that has on page load time."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="Examining the requests made by the top 100 sites"><meta name=twitter:description content="Following up to my Drowning in JavaScript post I take a look at the top 100 Alexa sites and see how many external files they're loading and the impact that has on page load time."><meta name=twitter:image content="//image/crawl-stats-requests-vs-time.png"><link rel=canonical href=/2014/03/09/examining-the-requests-made-by-the-top-100-sites/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.png><link href=/index.xml rel=alternate type=application/rss+xml title="Dan Goldin"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36313127-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-36313127-1')</script></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">Examining the requests made by the top 100 sites</h1><div class="mb-md-4 meta"><span class="date middot" title="Sun Mar 9 2014 00:00:00 UTC">2014-03-09</span>
<span class="reading-time middot">3 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/datascience>datascience</a></li><li class="d-inline middot"><a href=/tags/dataviz>dataviz</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>Since writing the <a href=http://dangoldin.com/2013/12/01/drowning-in-javascript/>Drowning in JavaScript</a> post I’ve been meaning to take a stab at automating that analysis and seeing if I could generate some other insights. This weekend I finally got around to writing a quick PhantomJS script to load the top 100 Alexa sites and capture each of the linked resources as well as their type. The resulting data set contains the time it took the entire page to load as well as the content type for each of the linked files. After loading these two datasets into R and doing a few simple transformations we can get some interesting results.</p><ul class=thumbnails><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-times-mean.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>Average load time.</strong> To get a general sense of the data this plots the average time it took to load each URL. The interesting piece here is that multiple foreign sites take a while to load (163.com, qq.com, gmw.cn, ..) - I suspect a big reason is that there's quite a bit of latency since I'm based in the US. Another observation is that many news sites tended to load slowly (huffingpost.com, cnn.com, cnet.com). The Google sites loaded extremely quickly (all less than 1 sec) as did Wikipedia.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-times-boxplot.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>Load time boxplot.</strong> This provides a bit more information on the load times by showing the min/max values as well as the median and the percentiles. Not a significant amount of new insight here.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-requests-count.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>Number of requests.</strong> Huge variance here as well - rakuten.co.jp loaded almost 800 external files while the Google sites are all less than 10.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-requests-vs-time.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>Number of request vs time to load.</strong> This leads to the question of whether sites that are loading more files take a longer time to load. By plotting a scatter plot between the two it's pretty clear that all things being equal more files increase page load time.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-regression.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>Number of requests vs time to load linear fit.</strong> A simple regression of load time as a function of the number of file requets confirms this. On average, each additional file leads to an additional 20 milliseconds of load.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-file-types-count.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>File type frequency.</strong> We can also take a look at the most common type of file requested. As expected, images are the majority of requests followed by JavaScript.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-file-types-url.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>File types by url.</strong> Not a lot of insight here but the colors sure are pretty. One thing that does standout is that if a site has a significant amount of file requests they tend to be of multiple types.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-file-types-correlation.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>File type correlation.</strong> We can plot a simple correlation of file type found on a page to see whether there are any file types that tend to be included together. Not much going on here.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-regression-multiple.png"><img src=/image/crawl-stats-regression-multiple.png alt="Multiple linear regression results" data-width=486 data-height=418 data-layout=responsive></a><p><strong>Multiple linear regression.</strong> And just for fun we can run a regression to see whether a particular file type leads to significantly worse load than others. I was hoping to show that having a lot of JavaScript hurts performance but that doesn't seem to be the case. I suspect it's due to the innate time differences it takes to load some sites (in particular sites outside the US) vs others.</p></div></li></ul><p>As usual, the code’s up on <a href=https://github.com/dangoldin/site-analysis target=_blank>GitHub</a>.</p></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2014/03/06/follow-the-whatsapp-money/>« Follow the WhatsApp money</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2014/03/11/website-load-times-nyc-vs-beijing/>Website load times: NYC vs Beijing »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2021 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li><li><a href=/index.xml class=mr-0>RSS</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script><script>window.addEventListener('load',function(){hljs.initHighlighting()},!0)</script></body></html>