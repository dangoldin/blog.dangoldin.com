<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Website load times: NYC vs Beijing - Dan Goldin
</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content="Website loading times are drastically different between NYC and Beijing - as expected the sites in China load faster in Beijing but slower in NY and vice versa."><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2014/03/11/website-load-times-nyc-vs-beijing/"><meta property="og:title" content="Website load times: NYC vs Beijing"><meta property="og:image" content="//image/crawl-stats-comparison-time-diff-bar.png"><meta property="og:description" content="Website loading times are drastically different between NYC and Beijing - as expected the sites in China load faster in Beijing but slower in NY and vice versa."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="Website load times: NYC vs Beijing"><meta name=twitter:description content="Website loading times are drastically different between NYC and Beijing - as expected the sites in China load faster in Beijing but slower in NY and vice versa."><meta name=twitter:image content="//image/crawl-stats-comparison-time-diff-bar.png"><link rel=canonical href=/2014/03/11/website-load-times-nyc-vs-beijing/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36313127-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-36313127-1")</script></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">Website load times: NYC vs Beijing</h1><div class="mb-md-4 meta"><span class="date middot" title='Tue Mar 11 2014 00:00:00 UTC'>2014-03-11
</span><span class="reading-time middot">3 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/datascience>datascience</a></li><li class="d-inline middot"><a href=/tags/dataviz>dataviz</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>Over the weekend I wrote a quick script to crawl the top 100 Alexa sites and <a href=http://dangoldin.com/2014/03/09/examining-the-requests-made-by-the-top-100-sites/>compare them</a> against one another in terms of load times and resources being loaded. I shared my code on GitHub and earlier today I got a great pull request from <a href=https://github.com/rahimnathwani target=_blank>rahimnathwani</a> who ran the script in Beijing, using home ADSL, and wanted to share his dataset.</p><p>I suspected that that many sites were loading slowly for me due to my geographical distance from them and with this dataset we’re able to compare the load times between NYC and Beijing for these sites. Unsurprisingly, most sites in Asia do load faster in Beijing but the average load time is much longer, 3.4 seconds in NYC vs 11 seconds in Beijing. A surprise was how slowly rakuten.co.jp loaded in Beijing - over 50 seconds on average and I suspect this is due to the huge number of images being loaded. I suspect internet speeds also played a part in the differences here so this isn’t a perfect comparison.</p><p>Below are some visualizations highlighting the differences in a few different ways. I’d love to get my hands on more data so if fee free to submit a <a href=https://github.com/dangoldin/site-analysis target=_blank>pull request</a> with your data and I’ll rerun the analysis. I’ve also included the R code that generate the plots below for those curious to see how they were done.</p><ul class=thumbnails><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-comparison-parallel.png"><img src=/image/crawl-stats-comparison-scatter-text.png alt="Load times scatter with text" data-width=600 data-height=600 data-layout=responsive></a><p><strong>Parallel plot.</strong> The idea here is to see whether the lines are mostly horizontal or if they're steep. Horizontal lines would indicate that sites are universally slow (and fast) while steep lines indicate that some sites load much faster in one city compared to the other.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-comparison-time-diff-bar.png"><img src=/image/crawl-stats-comparison-scatter-text.png alt="Load times scatter with text" data-width=600 data-height=600 data-layout=responsive></a><p><strong>Load time differences.</strong> Here we sort the sites by the difference in average load time, NYC minus Beijing. Most of the sites loaded faster in NYC but I suspect the biggest reason was due to internet speed differences. The sites that loaded faster in Beijing are for the most part in China.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-comparison-scatter.png"><img src=/image/crawl-stats-comparison-scatter-text.png alt="Load times scatter with text" data-width=600 data-height=600 data-layout=responsive></a><p><strong>Scatter plot.</strong> A different perspective than the parallel plot but trying to answer the same question. We do notice a few outliers here which we can investigate by adding text labels.</p></div></li><li><div class=thumbnail><a href="{{ IMG_PATH }}crawl-stats-comparison-scatter-text.png"><img src=/image/crawl-stats-comparison-scatter-text.png alt="Load times scatter with text" data-width=600 data-height=600 data-layout=responsive></a><p><strong>Labeled scatter plot.</strong> This provides a nice look at the outliers but makes it impossible to look at the sites that loaded quickly in both NYC and Beijing.</p></div></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>times <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>read.csv</span>(<span style=color:#e6db74>&#34;out-times-beijing.csv&#34;</span>, sep<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\t&#34;</span>, col.names<span style=color:#f92672>=</span><span style=color:#a6e22e>c</span>(<span style=color:#e6db74>&#34;url&#34;</span>, <span style=color:#e6db74>&#34;time&#34;</span>))
</span></span><span style=display:flex><span>times<span style=color:#f92672>$</span>url <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>as.character</span>(times<span style=color:#f92672>$</span>url)
</span></span><span style=display:flex><span>final <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>ddply</span>(times,<span style=color:#f92672>~</span>url,summarise,mean_time_beijing<span style=color:#f92672>=</span><span style=color:#a6e22e>mean</span>(time),sd_time_beijing<span style=color:#f92672>=</span><span style=color:#a6e22e>sd</span>(time))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>times2 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>read.csv</span>(<span style=color:#e6db74>&#34;out-times.csv&#34;</span>, sep<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\t&#34;</span>, col.names<span style=color:#f92672>=</span><span style=color:#a6e22e>c</span>(<span style=color:#e6db74>&#34;url&#34;</span>, <span style=color:#e6db74>&#34;time&#34;</span>))
</span></span><span style=display:flex><span>times2<span style=color:#f92672>$</span>url <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>as.character</span>(times2<span style=color:#f92672>$</span>url)
</span></span><span style=display:flex><span>final2 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>ddply</span>(times2,<span style=color:#f92672>~</span>url,summarise,mean_time_nyc<span style=color:#f92672>=</span><span style=color:#a6e22e>mean</span>(time),sd_time_nyc<span style=color:#f92672>=</span><span style=color:#a6e22e>sd</span>(time))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>combined <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>merge</span>(final,final2,by<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;url&#34;</span>)
</span></span><span style=display:flex><span>combined<span style=color:#f92672>$</span>time_diff <span style=color:#f92672>&lt;-</span> combined<span style=color:#f92672>$</span>mean_time_nyc <span style=color:#f92672>-</span> combined<span style=color:#f92672>$</span>mean_time_beijing
</span></span><span style=display:flex><span>combined.m <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>melt</span>(combined, id.vars<span style=color:#f92672>=</span><span style=color:#a6e22e>c</span>(<span style=color:#e6db74>&#39;url&#39;</span>), measure.vars<span style=color:#f92672>=</span><span style=color:#a6e22e>c</span>(<span style=color:#e6db74>&#39;mean_time_beijing&#39;</span>, <span style=color:#e6db74>&#39;mean_time_nyc&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>png</span>(<span style=color:#e6db74>&#39;crawl-stats-comparison-parallel.png&#39;</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(combined.m) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>geom_line</span>(<span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> variable, y <span style=color:#f92672>=</span> value, group <span style=color:#f92672>=</span> url)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>theme_tufte</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ylab</span>(<span style=color:#e6db74>&#34;Load Time (ms)&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>xlab</span>(<span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>dev.off</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>png</span>(<span style=color:#e6db74>&#39;crawl-stats-comparison-time-diff-bar.png&#39;</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(combined, <span style=color:#a6e22e>aes</span>(x<span style=color:#f92672>=</span><span style=color:#a6e22e>reorder</span>(url, <span style=color:#f92672>-</span>time_diff), y<span style=color:#f92672>=</span>time_diff)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>geom_bar</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>theme_tufte</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>coord_flip</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xlab</span>(<span style=color:#e6db74>&#34;Load Time Diff (ms)&#34;</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ylab</span>(<span style=color:#e6db74>&#34;URL&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>dev.off</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>png</span>(<span style=color:#e6db74>&#39;crawl-stats-comparison-scatter.png&#39;</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(combined, <span style=color:#a6e22e>aes</span>(x<span style=color:#f92672>=</span>mean_time_beijing, y<span style=color:#f92672>=</span>mean_time_nyc)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>geom_point</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>theme_tufte</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xlab</span>(<span style=color:#e6db74>&#34;Beijing Load Time (ms)&#34;</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ylab</span>(<span style=color:#e6db74>&#34;NYC Load Time (ms)&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>dev.off</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>png</span>(<span style=color:#e6db74>&#39;crawl-stats-comparison-scatter-text.png&#39;</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(combined, <span style=color:#a6e22e>aes</span>(x<span style=color:#f92672>=</span>mean_time_beijing, y<span style=color:#f92672>=</span>mean_time_nyc)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>geom_text</span>(<span style=color:#a6e22e>aes</span>(label<span style=color:#f92672>=</span>url), size<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>theme_tufte</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xlab</span>(<span style=color:#e6db74>&#34;Beijing Load Time (ms)&#34;</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ylab</span>(<span style=color:#e6db74>&#34;NYC Load Time (ms)&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>dev.off</span>()</span></span></code></pre></div></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2014/03/09/examining-the-requests-made-by-the-top-100-sites/>« Examining the requests made by the top 100 sites</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2014/03/16/fun-with-the-oyster-books-api/>Fun with the Oyster books API »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2024 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script><script>window.addEventListener("load",function(){hljs.initHighlighting()},!0)</script><script src=/js/math-code.js></script><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>