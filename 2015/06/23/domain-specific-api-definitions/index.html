<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Domain specific API definitions - Dan Goldin</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content="Amazon rewrote the boto library to take advantage of their domain specific models that represents the AWS API. It's wonderfully clever and I'd love to see standardization around API definition."><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2015/06/23/domain-specific-api-definitions/"><meta property="og:title" content="Domain specific API definitions"><meta property="og:image" content="/image/photo.jpg"><meta property="og:description" content="Amazon rewrote the boto library to take advantage of their domain specific models that represents the AWS API. It's wonderfully clever and I'd love to see standardization around API definition."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="Domain specific API definitions"><meta name=twitter:description content="Amazon rewrote the boto library to take advantage of their domain specific models that represents the AWS API. It's wonderfully clever and I'd love to see standardization around API definition."><meta name=twitter:image content="/image/photo.jpg"><link rel=canonical href=/2015/06/23/domain-specific-api-definitions/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=image/favicon.png><link href=/index.xml rel=alternate type=application/rss+xml title="Dan Goldin"></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">Domain specific API definitions</h1><div class="mb-md-4 meta"><span class="date middot" title="Tue Jun 23 2015 00:00:00 UTC">2015-06-23</span>
<span class="reading-time middot">2 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/meta>meta</a></li><li class="d-inline middot"><a href=/tags/code>code</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>Yesterday, Amazon <a href=https://aws.amazon.com/blogs/aws/now-available-aws-sdk-for-python-3-boto3/ target=_blank>announced</a> a major update to their Python client, boto3. The core functionality is unchanged but they used a clever solution to make it easier to add, modify, and remove endpoints. By coming up with a <a href=https://github.com/boto/boto3/tree/develop/boto3/data target=_blank>standardized representation</a> for each of the endpoints they’re able to write wrappers in different languages that generate the API calls programmatically. For example, I&rsquo;ve included a subset of the <a href=https://github.com/boto/boto3/blob/develop/boto3/data/ec2/2015-04-15/resources-1.json target=_blank>EC2 definition</a> below. It contains the information necessary to programatically generate the API wrapper to hit the appropriate EC2 endpoints.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;service&#34;</span>: {
    <span style=color:#f92672>&#34;actions&#34;</span>: {
      <span style=color:#f92672>&#34;CreateDhcpOptions&#34;</span>: {
        <span style=color:#f92672>&#34;request&#34;</span>: { <span style=color:#f92672>&#34;operation&#34;</span>: <span style=color:#e6db74>&#34;CreateDhcpOptions&#34;</span> },
        <span style=color:#f92672>&#34;resource&#34;</span>: {
          <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;DhcpOptions&#34;</span>,
          <span style=color:#f92672>&#34;identifiers&#34;</span>: [
            { <span style=color:#f92672>&#34;target&#34;</span>: <span style=color:#e6db74>&#34;Id&#34;</span>, <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;response&#34;</span>, <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;DhcpOptions.DhcpOptionsId&#34;</span> }
          ],
          <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;DhcpOptions&#34;</span>
        }
      },
      <span style=color:#f92672>&#34;CreateInstances&#34;</span>: {
        <span style=color:#f92672>&#34;request&#34;</span>: { <span style=color:#f92672>&#34;operation&#34;</span>: <span style=color:#e6db74>&#34;RunInstances&#34;</span> },
        <span style=color:#f92672>&#34;resource&#34;</span>: {
          <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;Instance&#34;</span>,
          <span style=color:#f92672>&#34;identifiers&#34;</span>: [
            { <span style=color:#f92672>&#34;target&#34;</span>: <span style=color:#e6db74>&#34;Id&#34;</span>, <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;response&#34;</span>, <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;Instances[].InstanceId&#34;</span> }
          ],
          <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;Instances[]&#34;</span>
        }
      },
      <span style=color:#960050;background-color:#1e0010>...</span>
    }
  }
}</code></pre></div><p>This domain specific approach is great when working with APIs and I’m surprised more libraries don’t adopt it. The benefits include being able to keep the actual code the same and only updating the definitions as well as having definitions shared across various language implementations. An additional benefit that can be gotten is actually downloading the latest definitions at runtime. This way you’re always running against the latest version of the API and don’t have to worry about upgrading versions.</p><p>I’d love to see more companies adopt this approach and even come up with a standard API declaration language. Then a single set of scripts can be used to wrap any API. Imagine how much simpler it would be to integrate with third party APIs when all you need to do is read the docs and have everything else wired. In fact the docs themselves can be generated from the base definitions.</p></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2015/06/20/properly-handling-text-based-two-factor-authentication/>« Properly handling text based two factor authentication</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2015/06/27/ambiguous-sql-queries/>Ambiguous SQL queries »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2021 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li><li><a href=/index.xml class=mr-0>RSS</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script><script>window.addEventListener('load',function(){hljs.initHighlighting();},true);</script></body></html>