<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>MySQL vs PostgreSQL sort order - Dan Goldin</title><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=referrer content="no-referrer"><meta name=description content="MySQL ignores case when doing the general ORDER BY. It's possible to make it case sensitive by using the BINARY keyword."><meta property="og:site_name" content="Dan Goldin"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="/2015/02/01/mysql-vs-postgresql-sort-order/"><meta property="og:title" content="MySQL vs PostgreSQL sort order"><meta property="og:image" content="/image/photo.jpg"><meta property="og:description" content="MySQL ignores case when doing the general ORDER BY. It's possible to make it case sensitive by using the BINARY keyword."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dangoldin"><meta name=twitter:creator content="@dangoldin"><meta name=twitter:title content="MySQL vs PostgreSQL sort order"><meta name=twitter:description content="MySQL ignores case when doing the general ORDER BY. It's possible to make it case sensitive by using the BINARY keyword."><meta name=twitter:image content="/image/photo.jpg"><link rel=canonical href=/2015/02/01/mysql-vs-postgresql-sort-order/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin=anonymous><link rel=stylesheet href=https://nanx-assets.netlify.app/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.png><link href=/index.xml rel=alternate type=application/rss+xml title="Dan Goldin"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36313127-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-36313127-1');</script></head><body><div class="my-4 my-lg-5 header"><div class=container><div class=row><div class="col-auto offset-lg-2 d-none d-lg-block"><a href=/><img class="ml-lg-4 logo img-fluid d-block rounded-circle" src=/image/photo.jpg alt=logo></a></div><div class="col-auto align-self-center mr-auto"><a href=/><h1 class=name>Dan Goldin</h1></a><ul class="nav nav-primary"><li class=nav-item><a class="nav-link text-home" href=/>Home</a></li><li class=nav-item><a class="nav-link text-about" href=/about/>About</a></li><li class=nav-item><a class="nav-link text-lore" href=/lore/>Lore</a></li></ul></div></div></div></div><div class=content><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><h1 class="mx-0 mx-md-4 blog-post-title">MySQL vs PostgreSQL sort order</h1><div class="mb-md-4 meta"><span class="date middot" title="Sun Feb 1 2015 00:00:00 UTC">2015-02-01</span>
<span class="reading-time middot">1 min read</span><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"><li class="d-inline middot"><a href=/tags/sql>sql</a></li></ul></div><div class="d-none d-md-inline tags"><ul class="list-unstyled d-inline"></ul></div></div><div class="markdown blog-post-content"><p>At <a href=http://triplelift.com target=_blank>TripleLift</a>, we have a migrations job that copies aggregate data from Redshift to MySQL so it can be accessed along the rest of the transactional data. As part of a test, I tried comparing that the data matched exactly but ran into an issue when exporting the data to select. Namely, to make the comparison as simple as possible I wanted to run the same select query in both tables and compare the results. Unfortunately, the sort order between MySQL and PostgreSQL (what Redshift is based on) acts differently for text fields. PostgreSQL takes case into account while MySQL does not. This has an especially weird results when you have values that contain characters with an ASCII code between the lower and upper case letters: []^-`. It took some research but I discovered that MySQL provides an option to do a case sensitive sort - just add a “BINARY” option before the field name.</p><p>The following queries demonstrate this behavior - all but the BINARY one can run on both MySQL and PostgreSQL.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> test_table ( t varchar(<span style=color:#ae81ff>5</span>) );

<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> test_table (t) <span style=color:#66d9ef>VALUES</span> (<span style=color:#e6db74>&#39;a&#39;</span>),(<span style=color:#e6db74>&#39;b&#39;</span>),(<span style=color:#e6db74>&#39;c&#39;</span>),(<span style=color:#e6db74>&#39;d&#39;</span>),(<span style=color:#e6db74>&#39;e&#39;</span>),(<span style=color:#e6db74>&#39;f&#39;</span>),(<span style=color:#e6db74>&#39;g&#39;</span>),(<span style=color:#e6db74>&#39;h&#39;</span>),(<span style=color:#e6db74>&#39;i&#39;</span>),(<span style=color:#e6db74>&#39;j&#39;</span>),(<span style=color:#e6db74>&#39;k&#39;</span>),(<span style=color:#e6db74>&#39;l&#39;</span>),(<span style=color:#e6db74>&#39;m&#39;</span>),(<span style=color:#e6db74>&#39;n&#39;</span>),(<span style=color:#e6db74>&#39;o&#39;</span>),(<span style=color:#e6db74>&#39;p&#39;</span>),(<span style=color:#e6db74>&#39;q&#39;</span>),(<span style=color:#e6db74>&#39;r&#39;</span>),(<span style=color:#e6db74>&#39;s&#39;</span>),(<span style=color:#e6db74>&#39;t&#39;</span>),(<span style=color:#e6db74>&#39;u&#39;</span>),(<span style=color:#e6db74>&#39;v&#39;</span>),(<span style=color:#e6db74>&#39;w&#39;</span>),(<span style=color:#e6db74>&#39;x&#39;</span>),(<span style=color:#e6db74>&#39;y&#39;</span>),(<span style=color:#e6db74>&#39;z&#39;</span>),(<span style=color:#e6db74>&#39;A&#39;</span>),(<span style=color:#e6db74>&#39;B&#39;</span>),(<span style=color:#e6db74>&#39;C&#39;</span>),(<span style=color:#e6db74>&#39;D&#39;</span>),(<span style=color:#e6db74>&#39;E&#39;</span>),(<span style=color:#e6db74>&#39;F&#39;</span>),(<span style=color:#e6db74>&#39;G&#39;</span>),(<span style=color:#e6db74>&#39;H&#39;</span>),(<span style=color:#e6db74>&#39;I&#39;</span>),(<span style=color:#e6db74>&#39;J&#39;</span>),(<span style=color:#e6db74>&#39;K&#39;</span>),(<span style=color:#e6db74>&#39;L&#39;</span>),(<span style=color:#e6db74>&#39;M&#39;</span>),(<span style=color:#e6db74>&#39;N&#39;</span>),(<span style=color:#e6db74>&#39;O&#39;</span>),(<span style=color:#e6db74>&#39;P&#39;</span>),(<span style=color:#e6db74>&#39;Q&#39;</span>),(<span style=color:#e6db74>&#39;R&#39;</span>),(<span style=color:#e6db74>&#39;S&#39;</span>),(<span style=color:#e6db74>&#39;T&#39;</span>),(<span style=color:#e6db74>&#39;U&#39;</span>),(<span style=color:#e6db74>&#39;V&#39;</span>),(<span style=color:#e6db74>&#39;W&#39;</span>),(<span style=color:#e6db74>&#39;X&#39;</span>),(<span style=color:#e6db74>&#39;Y&#39;</span>),(<span style=color:#e6db74>&#39;Z&#39;</span>),(<span style=color:#e6db74>&#39;0&#39;</span>),(<span style=color:#e6db74>&#39;1&#39;</span>),(<span style=color:#e6db74>&#39;2&#39;</span>),(<span style=color:#e6db74>&#39;3&#39;</span>),(<span style=color:#e6db74>&#39;4&#39;</span>),(<span style=color:#e6db74>&#39;5&#39;</span>),(<span style=color:#e6db74>&#39;6&#39;</span>),(<span style=color:#e6db74>&#39;7&#39;</span>),(<span style=color:#e6db74>&#39;8&#39;</span>),(<span style=color:#e6db74>&#39;9&#39;</span>),(<span style=color:#e6db74>&#39;[&#39;</span>),(<span style=color:#e6db74>&#39;\\&#39;</span>),(<span style=color:#e6db74>&#39;]&#39;</span>),(<span style=color:#e6db74>&#39;^&#39;</span>),(<span style=color:#e6db74>&#39;_&#39;</span>),(<span style=color:#e6db74>&#39;`&#39;</span>);

<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> test_table <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> t <span style=color:#66d9ef>ASC</span>;

<span style=color:#75715e>-- MySQL only
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> test_table <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> BINARY t <span style=color:#66d9ef>ASC</span>;</code></pre></div></div><div class=navigation><div class=row><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-left"><a href=/2015/01/29/migrating-a-simple-http-application-on-aws/>« Migrating a simple HTTP application on AWS</a></div></div><div class="col-12 col-lg-6"><div class="mx-0 mx-md-4 mt-4 text-right"><a href=/2015/02/07/url-redirection-app/>URL redirection app »</a></div></div></div></div></div></div></div></div><section id=comments><div class="py-3 content"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><div class=comments><script src=https://utteranc.es/client.js repo=dangoldin/blog.dangoldin.com-comments issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div></div></section><div class="my-4 footer"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-lg-8"><hr></div></div><div class="row justify-content-center"><div class="col-sm-12 col-lg-2"><div class="mx-0 mx-md-4 site-copyright">© 2021 Dan Goldin</div></div><div class="col-sm-12 col-lg-6"><div class="mx-0 mx-md-4 site-social"><ul><li><a href=mailto:dan@dangoldin.com>Contact</a></li><li><a href=https://github.com/dangoldin target=_blank>GitHub</a></li><li><a href=https://twitter.com/dangoldin target=_blank>Twitter</a></li><li><a href=https://www.linkedin.com/in/dangoldin target=_blank>LinkedIn</a></li><li><a href=/index.xml class=mr-0>RSS</a></li></ul></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js defer></script><script>window.addEventListener('load',function(){hljs.initHighlighting();},true);</script><script src=/js/math-code.js></script><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>